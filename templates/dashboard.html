<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <nav>
        <a href="{{ url_for('index') }}">Main</a>
        <a href="{{ url_for('dashboard') }}">Dashboard</a>
    </nav>

    <h1>Dashboard</h1>
    <p>Total Hours Worked: {{ total_hours }}</p>
    <p>Total Hours Bank Holiday: {{ total_bank_holiday }}</p>
    <p>Total Hours Sick Leave: {{ total_sick_leave }}</p>
    <p>Total Hours Annual Leave: {{ total_annual_leave }}</p>
    <p>Total Hours Training: {{ total_training }}</p>
    <p>Total Hours Over time: {{ total_overtime }}</p>

    <canvas id="hoursChart" width="400" height="200"></canvas>

    <script>
        let ctx = document.getElementById('hoursChart').getContext('2d');

        // Ensure `data` is not already declared elsewhere
        let chartData = {
            labels: {{ data| map(attribute = 'Date') | list | tojson }},
        datasets: [{
            label: 'Hours Worked',
            data: {{ data | map(attribute = 'Hours Worked') | list | tojson }},
            borderColor: 'rgb(75, 192, 192)',
            tension: 0.1  // Ensure this is set to a valid number
            }]
        };

        let config = {
            type: 'line',
            data: chartData,
        };

        let hoursChart = new Chart(ctx, config);

    </script>

</body>

</html>